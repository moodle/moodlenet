export type mime_type = keyof mimetypesmap
export type mimetype_obj = mime_type extends infer type
  ? type extends mime_type
    ? { type: type; sub: mimetypesmap[type][number] }
    : never
  : never
export type mimetype = mimetype_obj extends infer m
  ? m extends mimetype_obj
    ? `${m['type']}/${m['sub']}`
    : never
  : never

export function isMimetype(mime: string): mime is mime_type {
  const [_type, _sub] = mime.split('/')
  const type = String(_type)
  const sub = String(_sub)
  return type in mimetypesmap && sub in mimetypesmap[type as keyof mimetypesmap]
}

type mimetypesmap = typeof mimetypesmap
// https://mimetype.io/all-types
export const mimetypesmap = {
  'application': [
    'andrew-inset',
    'applixware',
    'atom+xml',
    'atomcat+xml',
    'atomsvc+xml',
    'ccxml+xml',
    'cu-seeme',
    'davmount+xml',
    'ecmascript',
    'emma+xml',
    'epub+zip',
    'font-tdpfr',
    'gzip',
    'hyperstudio',
    'java-archive',
    'java-serialized-object',
    'java-vm',
    'json',
    'lost+xml',
    'mac-binhex40',
    'mac-compactpro',
    'marc',
    'mathematica',
    'mathml+xml',
    'mbox',
    'mediaservercontrol+xml',
    'mp4',
    'msword',
    'mxf',
    'octet-stream',
    'oda',
    'oebps-package+xml',
    'ogg',
    'onenote',
    'patch-ops-error+xml',
    'pdf',
    'pgp-encrypted',
    'pgp-signature',
    'pics-rules',
    'pkcs10',
    'pkcs7-mime',
    'pkcs7-signature',
    'pkix-cert',
    'pkix-crl',
    'pkix-pkipath',
    'pkixcmp',
    'pls+xml',
    'postscript',
    'prql',
    'prs.cww',
    'rdf+xml',
    'reginfo+xml',
    'relax-ng-compact-syntax',
    'resource-lists+xml',
    'resource-lists-diff+xml',
    'rls-services+xml',
    'rsd+xml',
    'rss+xml',
    'rtf',
    'sbml+xml',
    'scvp-cv-request',
    'scvp-cv-response',
    'scvp-vp-request',
    'scvp-vp-response',
    'sdp',
    'set-payment-initiation',
    'set-registration-initiation',
    'shf+xml',
    'smil+xml',
    'sparql-query',
    'sparql-results+xml',
    'srgs',
    'srgs+xml',
    'ssml+xml',
    'vnd.3gpp.pic-bw-large',
    'vnd.3gpp.pic-bw-small',
    'vnd.3gpp.pic-bw-var',
    'vnd.3gpp2.tcap',
    'vnd.3m.post-it-notes',
    'vnd.accpac.simply.aso',
    'vnd.accpac.simply.imp',
    'vnd.acucobol',
    'vnd.acucorp',
    'vnd.adobe.air-application-installer-package+zip',
    'vnd.adobe.xdp+xml',
    'vnd.adobe.xfdf',
    'vnd.airzip.filesecure.azf',
    'vnd.airzip.filesecure.azs',
    'vnd.amazon.ebook',
    'vnd.americandynamics.acc',
    'vnd.amiga.ami',
    'vnd.android.package-archive',
    'vnd.anser-web-certificate-issue-initiation',
    'vnd.anser-web-funds-transfer-initiation',
    'vnd.antix.game-component',
    'vnd.apple.installer+xml',
    'vnd.arastra.swi',
    'vnd.audiograph',
    'vnd.blueice.multipass',
    'vnd.bmi',
    'vnd.businessobjects',
    'vnd.chemdraw+xml',
    'vnd.chipnuts.karaoke-mmd',
    'vnd.cinderella',
    'vnd.claymore',
    'vnd.clonk.c4group',
    'vnd.commonspace',
    'vnd.contact.cmsg',
    'vnd.cosmocaller',
    'vnd.crick.clicker',
    'vnd.crick.clicker.keyboard',
    'vnd.crick.clicker.palette',
    'vnd.crick.clicker.template',
    'vnd.crick.clicker.wordbank',
    'vnd.criticaltools.wbs+xml',
    'vnd.ctc-posml',
    'vnd.cups-ppd',
    'vnd.curl.car',
    'vnd.curl.pcurl',
    'vnd.data-vision.rdz',
    'vnd.debian.binary-package',
    'vnd.denovo.fcselayout-link',
    'vnd.dna',
    'vnd.dolby.mlp',
    'vnd.dpgraph',
    'vnd.dreamfactory',
    'vnd.dynageo',
    'vnd.ecowin.chart',
    'vnd.enliven',
    'vnd.epson.esf',
    'vnd.epson.msf',
    'vnd.epson.quickanime',
    'vnd.epson.salt',
    'vnd.epson.ssf',
    'vnd.eszigno3+xml',
    'vnd.ezpix-album',
    'vnd.ezpix-package',
    'vnd.fdf',
    'vnd.fdsn.mseed',
    'vnd.fdsn.seed',
    'vnd.flographit',
    'vnd.fluxtime.clip',
    'vnd.framemaker',
    'vnd.frogans.fnc',
    'vnd.frogans.ltf',
    'vnd.fsc.weblaunch',
    'vnd.fujitsu.oasys',
    'vnd.fujitsu.oasys2',
    'vnd.fujitsu.oasys3',
    'vnd.fujitsu.oasysgp',
    'vnd.fujitsu.oasysprs',
    'vnd.fujixerox.ddd',
    'vnd.fujixerox.docuworks',
    'vnd.fujixerox.docuworks.binder',
    'vnd.fuzzysheet',
    'vnd.genomatix.tuxedo',
    'vnd.geogebra.file',
    'vnd.geogebra.tool',
    'vnd.geometry-explorer',
    'vnd.gerber',
    'vnd.gmx',
    'vnd.google-earth.kml+xml',
    'vnd.google-earth.kmz',
    'vnd.grafeq',
    'vnd.groove-account',
    'vnd.groove-help',
    'vnd.groove-identity-message',
    'vnd.groove-injector',
    'vnd.groove-tool-message',
    'vnd.groove-tool-template',
    'vnd.groove-vcard',
    'vnd.handheld-entertainment+xml',
    'vnd.hbci',
    'vnd.hhe.lesson-player',
    'vnd.hp-hpgl',
    'vnd.hp-hpid',
    'vnd.hp-hps',
    'vnd.hp-jlyt',
    'vnd.hp-pcl',
    'vnd.hp-pclxl',
    'vnd.hydrostatix.sof-data',
    'vnd.hzn-3d-crossword',
    'vnd.ibm.minipay',
    'vnd.ibm.modcap',
    'vnd.ibm.rights-management',
    'vnd.ibm.secure-container',
    'vnd.iccprofile',
    'vnd.igloader',
    'vnd.immervision-ivp',
    'vnd.immervision-ivu',
    'vnd.intercon.formnet',
    'vnd.intu.qbo',
    'vnd.intu.qfx',
    'vnd.ipunplugged.rcprofile',
    'vnd.irepository.package+xml',
    'vnd.is-xpr',
    'vnd.jam',
    'vnd.jcp.javame.midlet-rms',
    'vnd.jisp',
    'vnd.joost.joda-archive',
    'vnd.kahootz',
    'vnd.kde.karbon',
    'vnd.kde.kchart',
    'vnd.kde.kformula',
    'vnd.kde.kivio',
    'vnd.kde.kontour',
    'vnd.kde.kpresenter',
    'vnd.kde.kspread',
    'vnd.kde.kword',
    'vnd.kenameaapp',
    'vnd.kidspiration',
    'vnd.kinar',
    'vnd.koan',
    'vnd.kodak-descriptor',
    'vnd.llamagraphics.life-balance.desktop',
    'vnd.llamagraphics.life-balance.exchange+xml',
    'vnd.lotus-1-2-3',
    'vnd.lotus-approach',
    'vnd.lotus-freelance',
    'vnd.lotus-notes',
    'vnd.lotus-organizer',
    'vnd.lotus-screencam',
    'vnd.lotus-wordpro',
    'vnd.macports.portpkg',
    'vnd.mcd',
    'vnd.medcalcdata',
    'vnd.mediastation.cdkey',
    'vnd.mfer',
    'vnd.mfmp',
    'vnd.micrografx.flo',
    'vnd.micrografx.igx',
    'vnd.mif',
    'vnd.mobius.daf',
    'vnd.mobius.dis',
    'vnd.mobius.mbk',
    'vnd.mobius.mqy',
    'vnd.mobius.msl',
    'vnd.mobius.plc',
    'vnd.mobius.txf',
    'vnd.mophun.application',
    'vnd.mophun.certificate',
    'vnd.mozilla.xul+xml',
    'vnd.ms-artgalry',
    'vnd.ms-cab-compressed',
    'vnd.ms-excel',
    'vnd.ms-excel.addin.macroenabled.12',
    'vnd.ms-excel.sheet.binary.macroenabled.12',
    'vnd.ms-excel.sheet.macroenabled.12',
    'vnd.ms-excel.template.macroenabled.12',
    'vnd.ms-fontobject',
    'vnd.ms-htmlhelp',
    'vnd.ms-ims',
    'vnd.ms-lrm',
    'vnd.ms-pki.seccat',
    'vnd.ms-pki.stl',
    'vnd.ms-powerpoint',
    'vnd.ms-powerpoint.addin.macroenabled.12',
    'vnd.ms-powerpoint.presentation.macroenabled.12',
    'vnd.ms-powerpoint.slide.macroenabled.12',
    'vnd.ms-powerpoint.slideshow.macroenabled.12',
    'vnd.ms-powerpoint.template.macroenabled.12',
    'vnd.ms-project',
    'vnd.ms-word.document.macroenabled.12',
    'vnd.ms-word.template.macroenabled.12',
    'vnd.ms-works',
    'vnd.ms-wpl',
    'vnd.ms-xpsdocument',
    'vnd.mseq',
    'vnd.musician',
    'vnd.muvee.style',
    'vnd.neurolanguage.nlu',
    'vnd.noblenet-directory',
    'vnd.noblenet-sealer',
    'vnd.noblenet-web',
    'vnd.nokia.n-gage.data',
    'vnd.nokia.n-gage.symbian.install',
    'vnd.nokia.radio-preset',
    'vnd.nokia.radio-presets',
    'vnd.novadigm.edm',
    'vnd.novadigm.edx',
    'vnd.novadigm.ext',
    'vnd.oasis.opendocument.chart',
    'vnd.oasis.opendocument.chart-template',
    'vnd.oasis.opendocument.database',
    'vnd.oasis.opendocument.formula',
    'vnd.oasis.opendocument.formula-template',
    'vnd.oasis.opendocument.graphics',
    'vnd.oasis.opendocument.graphics-template',
    'vnd.oasis.opendocument.image',
    'vnd.oasis.opendocument.image-template',
    'vnd.oasis.opendocument.presentation',
    'vnd.oasis.opendocument.presentation-template',
    'vnd.oasis.opendocument.spreadsheet',
    'vnd.oasis.opendocument.spreadsheet-template',
    'vnd.oasis.opendocument.text',
    'vnd.oasis.opendocument.text-master',
    'vnd.oasis.opendocument.text-template',
    'vnd.oasis.opendocument.text-web',
    'vnd.olpc-sugar',
    'vnd.oma.dd2+xml',
    'vnd.openofficeorg.extension',
    'vnd.openxmlformats-officedocument.presentationml.presentation',
    'vnd.openxmlformats-officedocument.presentationml.slide',
    'vnd.openxmlformats-officedocument.presentationml.slideshow',
    'vnd.openxmlformats-officedocument.presentationml.template',
    'vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'vnd.openxmlformats-officedocument.spreadsheetml.template',
    'vnd.openxmlformats-officedocument.wordprocessingml.document',
    'vnd.openxmlformats-officedocument.wordprocessingml.template',
    'vnd.osgi.dp',
    'vnd.palm',
    'vnd.pg.format',
    'vnd.pg.osasli',
    'vnd.picsel',
    'vnd.pocketlearn',
    'vnd.powerbuilder6',
    'vnd.previewsystems.box',
    'vnd.proteus.magazine',
    'vnd.publishare-delta-tree',
    'vnd.pvi.ptid1',
    'vnd.quark.quarkxpress',
    'vnd.rar',
    'vnd.recordare.musicxml',
    'vnd.recordare.musicxml+xml',
    'vnd.rim.cod',
    'vnd.rn-realmedia',
    'vnd.route66.link66+xml',
    'vnd.seemail',
    'vnd.sema',
    'vnd.semd',
    'vnd.semf',
    'vnd.shana.informed.formdata',
    'vnd.shana.informed.formtemplate',
    'vnd.shana.informed.interchange',
    'vnd.shana.informed.package',
    'vnd.simtech-mindmapper',
    'vnd.smaf',
    'vnd.smart.teacher',
    'vnd.solent.sdkm+xml',
    'vnd.spotfire.dxp',
    'vnd.spotfire.sfs',
    'vnd.sqlite3',
    'vnd.stardivision.calc',
    'vnd.stardivision.draw',
    'vnd.stardivision.impress',
    'vnd.stardivision.math',
    'vnd.stardivision.writer',
    'vnd.stardivision.writer-global',
    'vnd.sun.xml.calc',
    'vnd.sun.xml.calc.template',
    'vnd.sun.xml.draw',
    'vnd.sun.xml.draw.template',
    'vnd.sun.xml.impress',
    'vnd.sun.xml.impress.template',
    'vnd.sun.xml.math',
    'vnd.sun.xml.writer',
    'vnd.sun.xml.writer.global',
    'vnd.sun.xml.writer.template',
    'vnd.sus-calendar',
    'vnd.svd',
    'vnd.symbian.install',
    'vnd.syncml+xml',
    'vnd.syncml.dm+wbxml',
    'vnd.syncml.dm+xml',
    'vnd.tao.intent-module-archive',
    'vnd.tmobile-livetv',
    'vnd.trid.tpt',
    'vnd.triscape.mxs',
    'vnd.trueapp',
    'vnd.ufdl',
    'vnd.uiq.theme',
    'vnd.umajin',
    'vnd.unity',
    'vnd.uoml+xml',
    'vnd.vcx',
    'vnd.visio',
    'vnd.visionary',
    'vnd.vsf',
    'vnd.wap.sic',
    'vnd.wap.slc',
    'vnd.wap.wbxml',
    'vnd.wap.wmlc',
    'vnd.wap.wmlscriptc',
    'vnd.webturbo',
    'vnd.wordperfect',
    'vnd.wqd',
    'vnd.wt.stf',
    'vnd.xara',
    'vnd.xfdl',
    'vnd.yamaha.hv-dic',
    'vnd.yamaha.hv-script',
    'vnd.yamaha.hv-voice',
    'vnd.yamaha.openscoreformat',
    'vnd.yamaha.openscoreformat.osfpvg+xml',
    'vnd.yamaha.smaf-audio',
    'vnd.yamaha.smaf-phrase',
    'vnd.yellowriver-custom-menu',
    'vnd.zul',
    'vnd.zzazz.deck+xml',
    'voicexml+xml',
    'wasm',
    'winhlp',
    'wsdl+xml',
    'wspolicy+xml',
    'x-7z-compressed',
    'x-abiword',
    'x-ace-compressed',
    'x-authorware-bin',
    'x-authorware-map',
    'x-authorware-seg',
    'x-bcpio',
    'x-bittorrent',
    'x-bzip',
    'x-bzip2',
    'x-cdlink',
    'x-chat',
    'x-chess-pgn',
    'x-cpio',
    'x-csh',
    'x-debian-package',
    'x-director',
    'x-doom',
    'x-dtbncx+xml',
    'x-dtbook+xml',
    'x-dtbresource+xml',
    'x-dvi',
    'x-font-bdf',
    'x-font-ghostscript',
    'x-font-linux-psf',
    'x-font-otf',
    'x-font-pcf',
    'x-font-snf',
    'x-font-ttf',
    'x-font-type1',
    'x-futuresplash',
    'x-gnumeric',
    'x-gtar',
    'x-gzip',
    'x-hdf',
    'x-iso9660-image',
    'x-java-jnlp-file',
    'x-killustrator',
    'x-krita',
    'x-latex',
    'x-mobipocket-ebook',
    'x-ms-application',
    'x-ms-wmd',
    'x-ms-wmz',
    'x-ms-xbap',
    'x-msaccess',
    'x-msbinder',
    'x-mscardfile',
    'x-msclip',
    'x-msdownload',
    'x-msmediaview',
    'x-msmetafile',
    'x-msmoney',
    'x-mspublisher',
    'x-msschedule',
    'x-msterminal',
    'x-mswrite',
    'x-netcdf',
    'x-perl',
    'x-pkcs12',
    'x-pkcs7-certificates',
    'x-pkcs7-certreqresp',
    'x-python-code',
    'x-rar-compressed',
    'x-redhat-package-manager',
    'x-rpm',
    'x-sh',
    'x-shar',
    'x-shellscript',
    'x-shockwave-flash',
    'x-silverlight-app',
    'x-sqlite3',
    'x-stuffit',
    'x-stuffitx',
    'x-sv4cpio',
    'x-sv4crc',
    'x-tar',
    'x-tcl',
    'x-tex',
    'x-tex-tfm',
    'x-texinfo',
    'x-trash',
    'x-ustar',
    'x-wais-source',
    'x-x509-ca-cert',
    'x-xfig',
    'x-xpinstall',
    'x-zip-compressed',
    'xenc+xml',
    'xhtml+xml',
    'xml',
    'xml-dtd',
    'xop+xml',
    'xslt+xml',
    'xspf+xml',
    'xv+xml',
    'yaml',
    'zip',
    'zip-compressed',
  ],
  'audio': [
    '3gpp2',
    'aac',
    'aacp',
    'adpcm',
    'aiff',
    'x-aiff',
    'basic',
    'flac',
    'midi',
    'mp4',
    'mp4a-latm',
    'mpeg',
    'ogg',
    'opus',
    'vnd.digital-winds',
    'vnd.dts',
    'vnd.dts.hd',
    'vnd.lucent.voice',
    'vnd.ms-playready.media.pya',
    'vnd.nuera.ecelp4800',
    'vnd.nuera.ecelp7470',
    'vnd.nuera.ecelp9600',
    'vnd.wav',
    'wav',
    'x-wav',
    'vnd.wave',
    'wave',
    'x-pn-wav',
    'webm',
    'x-matroska',
    'x-mpegurl',
    'x-ms-wax',
    'x-ms-wma',
    'x-pn-realaudio',
    'x-pn-realaudio-plugin',
  ],
  'chemical': ['x-cdx', 'x-cif', 'x-cmdf', 'x-cml', 'x-csml', 'x-xyz'],
  'font': ['otf', 'woff', 'woff2'],
  'gcode': [null],
  'image': [
    'avif',
    'bmp',
    'cgm',
    'g3fax',
    'gif',
    'heic',
    'ief',
    'jpeg',
    'pjpeg',
    'png',
    'prs.btif',
    'svg+xml',
    'tiff',
    'vnd.adobe.photoshop',
    'vnd.djvu',
    'vnd.dwg',
    'vnd.dxf',
    'vnd.fastbidsheet',
    'vnd.fpx',
    'vnd.fst',
    'vnd.fujixerox.edmics-mmr',
    'vnd.fujixerox.edmics-rlc',
    'vnd.ms-modi',
    'vnd.net-fpx',
    'vnd.wap.wbmp',
    'vnd.xiff',
    'webp',
    'x-adobe-dng',
    'x-canon-cr2',
    'x-canon-crw',
    'x-cmu-raster',
    'x-cmx',
    'x-epson-erf',
    'x-freehand',
    'x-fuji-raf',
    'x-icns',
    'x-icon',
    'x-kodak-dcr',
    'x-kodak-k25',
    'x-kodak-kdc',
    'x-minolta-mrw',
    'x-nikon-nef',
    'x-olympus-orf',
    'x-panasonic-raw',
    'x-pcx',
    'x-pentax-pef',
    'x-pict',
    'x-portable-anymap',
    'x-portable-bitmap',
    'x-portable-graymap',
    'x-portable-pixmap',
    'x-rgb',
    'x-sigma-x3f',
    'x-sony-arw',
    'x-sony-sr2',
    'x-sony-srf',
    'x-xbitmap',
    'x-xpixmap',
    'x-xwindowdump',
  ],
  'message': ['rfc822'],
  'model': ['iges', 'mesh', 'vnd.dwf', 'vnd.gdl', 'vnd.gtw', 'vnd.mts', 'vnd.vtu', 'vrml'],
  'test': ['mimetype', 'mimetype'],
  'text': [
    'calendar',
    'css',
    'csv',
    'html',
    'javascript',
    'markdown',
    'mathml',
    'plain',
    'prs.lines.tag',
    'richtext',
    'sgml',
    'tab-separated-values',
    'troff',
    'uri-list',
    'vnd.curl',
    'vnd.curl.dcurl',
    'vnd.curl.mcurl',
    'vnd.curl.scurl',
    'vnd.fly',
    'vnd.fmi.flexstor',
    'vnd.graphviz',
    'vnd.in3d.3dml',
    'vnd.in3d.spot',
    'vnd.sun.j2me.app-descriptor',
    'vnd.wap.si',
    'vnd.wap.sl',
    'vnd.wap.wml',
    'vnd.wap.wmlscript',
    'x-asm',
    'x-c',
    'x-fortran',
    'x-java-source',
    'x-pascal',
    'x-python',
    'x-setext',
    'x-uuencode',
    'x-vcalendar',
    'x-vcard',
  ],
  'video': [
    '3gpp',
    '3gpp2',
    'h261',
    'h263',
    'h264',
    'jpeg',
    'jpm',
    'mj2',
    'mp2t',
    'mp4',
    'mpeg',
    'ogg',
    'quicktime',
    'vnd.fvt',
    'vnd.mpegurl',
    'vnd.ms-playready.media.pyv',
    'vnd.vivo',
    'webm',
    'x-f4v',
    'x-fli',
    'x-flv',
    'x-m4v',
    'x-matroska',
    'x-ms-asf',
    'x-ms-wm',
    'x-ms-wmv',
    'x-ms-wmx',
    'x-ms-wvx',
    'x-msvideo',
    'x-sgi-movie',
  ],
  'x-conference': ['x-cooltalk'],
} as const
